name: Create Pull Request
on: push

defaults:
  run:
    shell: pwsh

jobs:
  build:
    runs-on: windows-latest
    strategy:
      matrix:
        python-version: [ 'pypy2', 'pypy3' ]
    name: ${{ matrix.python-version }} sample
    steps:
      - uses: actions/checkout@v2

      - name: Setup python
        uses: nikita-bykov/setup-python@improve-usepypy-on-windows
        with:
          python-version: ${{ matrix.python-version }}
          architecture: x64

      - name: Remove bin folder
        run: |
          python --version
          rm -r "C:/hostedtoolcache/windows/PyPy/2.7.18/x86/bin"

      - name: Check bin folder
        run: Get-ChildItem -Path "C:/hostedtoolcache/windows/PyPy/2.7.18/x86"

      - name: "Test"
        run: |
          python --version
          echo $PATH
          pip install arrow
          python -c "import arrow;print(arrow.get('2013-05-11T21:23:58.970460+07:00'))"
        shell: bash 